j = c(1,3),
part = "body")
tbl <- flextable::width(tbl,
j = 1:3,
width = c(1, 1, 3),
unit = "in")
return(tbl)
}
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table.png"))
create_indicator_table <- function(data, dir, type) {
if(type == "Socioeconomic") {
head_fill = "#547A64"
text_col = "#6C8975"
} else if (type == "Ecosystem") {
head_fill = "#008998"
text_col = "#00467F"
} else {
stop("Type must be either 'Socioeconomic' or 'Ecosystem'")
}
data <- data |>
dplyr::mutate(filepath = paste0(dir, "/", trend),
status_filepath = paste0(dir, "/", status_image)) |>
dplyr::left_join(AKesp::color_key) |>
dplyr::rename(type2 = type) |>
dplyr::filter(type2 == type)
small_dat <- data |>
dplyr::select(1:3)
colnames(small_dat) <- colnames(small_dat) |>
stringr::str_replace_all("_", " ") |>
stringr::str_to_title()
flextable::set_flextable_defaults(font.size = 10)
tbl <- flextable::flextable(small_dat)
tbl <- flextable::theme_box(tbl)
for(i in 1:nrow(small_dat)){
# add time series graph
tbl <- flextable::compose(tbl,
i = i,
j = 3,
value = flextable::as_paragraph(
flextable::as_image(src = data$filepath[i],
width = 1.5,
height = 1.5,
unit = "in",
guess_size = FALSE
)))
# add status icon
tbl <- flextable::compose(tbl,
i = i,
j = 2,
value = flextable::as_paragraph(
data$status_2024[i], "\n",
flextable::as_image(src = data$status_filepath[i],
width = 0.5,
height = 0.5,
unit = "in",
guess_size = FALSE
)))
# update background color
tbl <- flextable::bg(tbl,
i = i,
bg = data$color[i])
}
# aesthetic formatting
tbl <- flextable::bold(tbl, j = 1)
tbl <- flextable::bg(tbl,
bg = head_fill,
part = "header")
tbl <- flextable::color(tbl,
color = "white",
part = "header")
tbl <- flextable::color(tbl,
color = text_col,
part = "body")
tbl <- flextable::border(tbl,
border = officer::fp_border(color = "white"),
part = "all")
tbl <- flextable::align(tbl,
align = "center",
part = "header")
tbl <- flextable::align(tbl,
align = "center",
j = 1:3,
part = "body")
tbl <- flextable::width(tbl,
j = 1:3,
width = c(1, 1, 3),
unit = "in")
return(tbl)
}
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table.png"))
roxygen2::roxygenise()
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table_eco.png"))
color_key <- read.csv(here::here("data-raw/color_key.csv"))
usethis::use_data(color_key, overwrite = TRUE)
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
create_indicator_table <- function(data, dir, type) {
if(type == "Socioeconomic") {
head_fill = "#2e3192ff"
text_col = "#2e3192"
} else if (type == "Ecosystem") {
head_fill = "#008998"
text_col = "#00467F"
} else {
stop("Type must be either 'Socioeconomic' or 'Ecosystem'")
}
data <- data |>
dplyr::mutate(filepath = paste0(dir, "/", trend),
status_filepath = paste0(dir, "/", status_image)) |>
dplyr::left_join(AKesp::color_key) |>
dplyr::rename(type2 = type) |>
dplyr::filter(type2 == type)
small_dat <- data |>
dplyr::select(1:3)
colnames(small_dat) <- colnames(small_dat) |>
stringr::str_replace_all("_", " ") |>
stringr::str_to_title()
flextable::set_flextable_defaults(font.size = 10)
tbl <- flextable::flextable(small_dat)
tbl <- flextable::theme_box(tbl)
for(i in 1:nrow(small_dat)){
# add time series graph
tbl <- flextable::compose(tbl,
i = i,
j = 3,
value = flextable::as_paragraph(
flextable::as_image(src = data$filepath[i],
width = 1.5,
height = 1.5,
unit = "in",
guess_size = FALSE
)))
# add status icon
tbl <- flextable::compose(tbl,
i = i,
j = 2,
value = flextable::as_paragraph(
data$status_2024[i], "\n",
flextable::as_image(src = data$status_filepath[i],
width = 0.5,
height = 0.5,
unit = "in",
guess_size = FALSE
)))
# update background color
tbl <- flextable::bg(tbl,
i = i,
bg = data$color[i])
}
# aesthetic formatting
tbl <- flextable::bold(tbl, j = 1)
tbl <- flextable::bg(tbl,
bg = head_fill,
part = "header")
tbl <- flextable::color(tbl,
color = "white",
part = "header")
tbl <- flextable::color(tbl,
color = text_col,
part = "body")
tbl <- flextable::border(tbl,
border = officer::fp_border(color = "white"),
part = "all")
tbl <- flextable::align(tbl,
align = "center",
part = "header")
tbl <- flextable::align(tbl,
align = "center",
j = 1:3,
part = "body")
tbl <- flextable::width(tbl,
j = 1:3,
width = c(1, 1, 3),
unit = "in")
return(tbl)
}
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
roxygen2::roxygenise()
devtools::load_all()
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table_eco.png"))
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table.png"))
color_key <- read.csv(here::here("data-raw/color_key.csv"))
usethis::use_data(color_key, overwrite = TRUE)
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table.png"))
AKesp::color_key
devtools::load_all()
AKesp::color_key
img <- create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
flextable::save_as_image(img,
path = here::here("data-raw/indicator_table.png"))
?usethis::use_vignette()
usethis::use_vignette("two_pager_indicator_table.Rmd")
temp <- read.csv(here::here("inst/two-pager_table_template.csv"))
print(temp)
create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
pkgdown::render_site()
pkgdown::build_site()
install.packages("preferably")
install.packages("preferably")
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
pkgdown::build_site()
dat <- AKesp::get_esp_data("Alaska Sablefish") |>
AKesp::check_data()
AKesp::esp_cor_matrix(
data = dat,
out = "ggplot"
)
dat
pkgdown::build_article("create-figures.Rmd")
pkgdown::build_article("vignettes/create-figures.Rmd")
pkgdown::build_site()
pkgdown::build_site()
devtools::load_all()
pkgdown::build_site()
pak::pak("kshotwell/AKesp")
pkgdown::build_site()
pak::pak("kshotwell/AKesp")
pak::pak("kshotwell/AKesp")
roxygen2::roxygenise()
remove.packages("AKesp")
pak::pak("kshotwell/AKesp")
pak::pak("kshotwell/AKesp")
remotes::install_github("kshotwell/AKesp")
devtools::load_all
devtools::load_all()
devtools::load_all()
pak::pak("kshotwell/AKesp")
pkgdown::build_site()
dat <- AKesp::get_esp_data("Alaska Sablefish") |>
AKesp::check_data()
head(dat)
dat$INDICATOR_NAME[1]
AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = TRUE,
out = "ggplot",
silent = TRUE
)
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
)
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 3,
height = 2,
unit = "in")
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 6,
height = 4,
unit = "in")
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
) +
ggplot2::xlab("")
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
) +
ggplot2::theme(xaxis.text.x = ggplot2::element_blank()) +
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 6,
height = 4,
unit = "in")
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
) +
ggplot2::theme(xaxis.text.x = ggplot2::element_blank())
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 6,
height = 4,
unit = "in")
?theme
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
) +
ggplot2::theme(axis.title.x = ggplot2::element_blank())
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 6,
height = 4,
unit = "in")
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
) +
ggplot2::theme(axis.title.x = ggplot2::element_blank())
fig
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
)
fig +
ggplot2::theme(axis.title.x = ggplot2::element_blank())
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
)
fig
AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
)
AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
)
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "ggplot",
silent = TRUE
)
fig
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "one_pager",
silent = TRUE
)
fig +
ggplot2::theme(axis.title.x = ggplot2::element_blank())
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 6,
height = 4,
unit = "in")
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
temp <- read.csv(here::here("inst/two-pager_table_template.csv"))
knitr::kable(temp)
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
devtools::load_all()
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
fig <- AKesp::esp_traffic(
data = dat |>
dplyr::filter(INDICATOR_NAME == "Annual_Copepod_Community_Size_EGOA_Survey"),
paginate = FALSE,
out = "one_pager",
silent = TRUE
)
fig +
ggplot2::theme(axis.title.x = ggplot2::element_blank(),
plot.background = ggplot2::element_rect(fill='transparent',
color='transparent'))
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 6,
height = 4,
unit = "in")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
ggplot2::ggsave(here::here("data-raw/test_time_series.png"),
width = 4,
height = 2.5,
unit = "in")
fig +
ggplot2::theme(axis.title.x = ggplot2::element_blank(),
plot.background = ggplot2::element_rect(fill='transparent',
color='transparent'))
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
ggplot2::ggsave(here::here("inst/test_time_series.png"),
width = 4,
height = 2.5,
unit = "in")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
ggplot2::ggsave(here::here("inst/images/test_time_series.png"),
width = 4.5,
height = 2.5,
unit = "in")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
?theme
fig +
ggplot2::theme(axis.title.x = ggplot2::element_blank(),
plot.background = ggplot2::element_rect(color='black'))
ggplot2::ggsave(here::here("inst/images/test_time_series.png"),
width = 4.5,
height = 2.5,
unit = "in")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Ecosystem")
AKesp::create_indicator_table(data = read.csv(here::here("inst/two-pager_table_template.csv")),
dir = here::here("inst/images"),
type = "Socioeconomic")
?build_article
pkgdown::build_article("two_page_indicator_table")
pkgdown::build_article(name = "two_page_indicator_table")
pkgdown::build_articles()
1027/200
737./200
1064/200
pkgdown::build_articles()
devtools::load_all()
pkgdown::build_articles()
pkgdown::build_articles()
pkgdown::build_articles()
pkgdown::build_articles()
pkgdown::build_articles()
pkgdown::build_site()
devtools::install_github("vast-lib/tinyVAST", dependencies = TRUE)
devtools::install_github("james-thorson/VAST@main", INSTALL_opts="--no-staged-install")
